import{A as b,B as $,r as p,c as A,D as S,aa as U,ab as R,ac as _,ad as k,l as w,Q as D,G as F,d as C,t as L,J as I,f as z,ae as B}from"./app-EBfQVngv.js";import{r as K,S as T}from"./createLucideIcon-Bum0n0ja.js";import{v as W,f as q,e as j}from"./useForwardExpose-DEuI3wav.js";function V(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,a=Symbol(s);return[o=>{const u=b(a,o);if(u||u===null)return u;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},o=>($(a,o),o)]}function ne(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const[G,oe]=V("ConfigProvider");function ae(e){const t=G({dir:p("ltr")});return A(()=>e?.value||t.dir?.value||"ltr")}function H(e){const t=S(),s=t?.type.emits,a={};return s?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),s?.forEach(n=>{a[U(R(n))]=(...l)=>e(n,...l)}),a}function J(e){const t=S(),s=Object.keys(t?.type.props??{}).reduce((n,l)=>{const o=(t?.type.props[l]).default;return o!==void 0&&(n[l]=o),n},{}),a=_(e);return A(()=>{const n={},l=t?.vnode.props??{};return Object.keys(l).forEach(o=>{n[R(o)]=l[o]}),Object.keys({...s,...n}).reduce((o,u)=>(a.value[u]!==void 0&&(o[u]=a.value[u]),o),{})})}function ie(e,t){const s=J(e),a=t?H(t):{};return A(()=>({...s.value,...a}))}function re(e,t="reka"){return e||`${t}-${k?.()}`}function Q(e,t){const s=p(e);function a(l){return t[s.value][l]??s.value}return{state:s,dispatch:l=>{s.value=a(l)}}}function Y(e,t){const s=p({}),a=p("none"),n=p(e),l=e.value?"mounted":"unmounted";let o;const u=t.value?.ownerDocument.defaultView??W,{state:d,dispatch:c}=Q(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),i=r=>{if(q){const f=new CustomEvent(r,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(f)}};w(e,async(r,f)=>{const g=f!==r;if(await D(),g){const P=a.value,N=M(t.value);r?(c("MOUNT"),i("enter"),N==="none"&&i("after-enter")):N==="none"||N==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),i("leave"),i("after-leave")):f&&P!==N?(c("ANIMATION_OUT"),i("leave")):(c("UNMOUNT"),i("after-leave"))}},{immediate:!0});const m=r=>{const f=M(t.value),g=f.includes(r.animationName),P=d.value==="mounted"?"enter":"leave";if(r.target===t.value&&g&&(i(`after-${P}`),c("ANIMATION_END"),!n.value)){const N=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",o=u?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=N)})}r.target===t.value&&f==="none"&&c("ANIMATION_END")},v=r=>{r.target===t.value&&(a.value=M(t.value))},y=w(t,(r,f)=>{r?(s.value=getComputedStyle(r),r.addEventListener("animationstart",v),r.addEventListener("animationcancel",m),r.addEventListener("animationend",m)):(c("ANIMATION_END"),o!==void 0&&u?.clearTimeout(o),f?.removeEventListener("animationstart",v),f?.removeEventListener("animationcancel",m),f?.removeEventListener("animationend",m))},{immediate:!0}),h=w(d,()=>{const r=M(t.value);a.value=d.value==="mounted"?r:"none"});return F(()=>{y(),h()}),{isPresent:A(()=>["mounted","unmountSuspended"].includes(d.value))}}function M(e){return e&&getComputedStyle(e).animationName||"none"}var se=C({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){const{present:a,forceMount:n}=L(e),l=p(),{isPresent:o}=Y(a,l);s({present:o});let u=t.default({present:o.value});u=K(u||[]);const d=S();if(u&&u?.length>1){const c=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(i=>`  - ${i}`).join(`
`)].join(`
`))}return()=>n.value||a.value||o.value?I(t.default({present:o.value})[0],{ref:c=>{const i=j(c);return typeof i?.hasAttribute>"u"||(i?.hasAttribute("data-reka-popper-content-wrapper")?l.value=i.firstElementChild:l.value=i),i}}):null}});function x(){const e=p(),t=A(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:j(e));return{primitiveElement:e,currentElement:t}}const O="data-reka-collection-item";function le(e={}){const{key:t="",isProvider:s=!1}=e,a=`${t}CollectionProvider`;let n;if(s){const i=p(new Map);n={collectionRef:p(),itemMap:i},$(a,n)}else n=b(a);const l=(i=!1)=>{const m=n.collectionRef.value;if(!m)return[];const v=Array.from(m.querySelectorAll(`[${O}]`)),h=Array.from(n.itemMap.value.values()).sort((E,r)=>v.indexOf(E.ref)-v.indexOf(r.ref));return i?h:h.filter(E=>E.ref.dataset.disabled!=="")},o=C({name:"CollectionSlot",setup(i,{slots:m}){const{primitiveElement:v,currentElement:y}=x();return w(y,()=>{n.collectionRef.value=y.value}),()=>I(T,{ref:v},m)}}),u=C({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(i,{slots:m,attrs:v}){const{primitiveElement:y,currentElement:h}=x();return z(E=>{if(h.value){const r=B(h.value);n.itemMap.value.set(r,{ref:h.value,value:i.value}),E(()=>n.itemMap.value.delete(r))}}),()=>I(T,{...v,[O]:"",ref:y},m)}}),d=A(()=>Array.from(n.itemMap.value.values())),c=A(()=>n.itemMap.value.size);return{getItems:l,reactiveItems:d,itemMapSize:c,CollectionSlot:o,CollectionItem:u}}export{se as P,ae as a,re as b,V as c,J as d,ie as e,x as f,ne as g,H as h,G as i,le as u};
